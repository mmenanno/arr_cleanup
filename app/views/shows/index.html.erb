<div class="space-y-6">
  <!-- Header -->
  <div class="flex justify-between items-center">
    <div class="flex items-center gap-4">
      <div class="flex items-center justify-center w-12 h-12 rounded-xl bg-gradient-to-br from-indigo-600 to-purple-600 shadow-lg">
        <svg class="h-7 w-7 text-white" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 20.25h12m-7.5-3v3m3-3v3m-10.125-3h17.25c.621 0 1.125-.504 1.125-1.125V4.875c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125z" />
        </svg>
      </div>
<div>
        <h1 class="text-3xl font-bold text-white">TV Shows</h1>
        <p class="text-sm text-gray-400"><%= @pagy.count %> total shows</p>
      </div>
    </div>

    <%= button_to sync_all_shows_path, method: :post, data: { turbo_stream: true }, class: "inline-flex items-center gap-2 rounded-lg bg-indigo-600 px-5 py-2.5 text-sm font-semibold text-white shadow-lg hover:bg-indigo-500 transition-colors cursor-pointer" do %>
      <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99" />
      </svg>
      Sync All
    <% end %>
  </div>

  <!-- Search and Filters -->
  <div class="bg-gray-800/50 backdrop-blur rounded-xl p-5 border border-gray-700 relative z-30">
    <%= form_with url: shows_path, method: :get, data: { turbo_frame: "shows_list", controller: "auto-submit" } do |f| %>
      <div class="flex flex-col sm:flex-row gap-4">
        <!-- Search -->
        <div class="flex-1">
          <div class="relative">
            <div class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3">
              <svg class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z" />
              </svg>
            </div>
            <%= f.text_field(:q, value: @query, placeholder: "Search shows...", data: { action: "input->debounce#search", auto_submit_target: "field" }, class: "block w-full pl-10 pr-3 py-2.5 rounded-lg bg-gray-900 border border-gray-700 text-white placeholder-gray-500 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 hover:border-gray-600 transition-colors text-sm") %>
          </div>
        </div>

        <!-- Sort Dropdown -->
        <div class="flex items-center gap-2">
          <div class="sm:w-40 relative" data-controller="dropdown">
            <%= f.hidden_field(:sort, value: @sort, data: { dropdown_target: "input", action: "change->auto-submit#submit" }) %>
            <button type="button" data-action="click->dropdown#toggle" data-dropdown-target="button" class="relative w-full cursor-pointer rounded-lg bg-gray-900 border border-gray-700 px-3 py-2.5 text-left text-white hover:border-gray-600 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition-colors text-sm">
              <span class="block truncate"><%= { "size" => "Size", "title" => "Title", "year" => "Year", "ignored" => "Ignored" }[@sort] || "Size" %></span>
              <span class="pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2">
                <svg class="h-4 w-4 text-gray-400" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M10 3a.75.75 0 01.55.24l3.25 3.5a.75.75 0 11-1.1 1.02L10 4.852 7.3 7.76a.75.75 0 01-1.1-1.02l3.25-3.5A.75.75 0 0110 3zm-3.76 9.2a.75.75 0 011.06.04l2.7 2.908 2.7-2.908a.75.75 0 111.1 1.02l-3.25 3.5a.75.75 0 01-1.1 0l-3.25-3.5a.75.75 0 01.04-1.06z" clip-rule="evenodd" />
                </svg>
              </span>
            </button>
            <div data-dropdown-target="menu" class="hidden absolute z-50 mt-1 w-40 overflow-auto rounded-lg bg-gray-900 border border-gray-700 py-1 shadow-xl">
              <div data-action="click->dropdown#select" data-value="size" class="cursor-pointer px-3 py-2 text-sm text-white hover:bg-gray-700">Size</div>
              <div data-action="click->dropdown#select" data-value="title" class="cursor-pointer px-3 py-2 text-sm text-white hover:bg-gray-700">Title</div>
              <div data-action="click->dropdown#select" data-value="year" class="cursor-pointer px-3 py-2 text-sm text-white hover:bg-gray-700">Year</div>
              <div data-action="click->dropdown#select" data-value="ignored" class="cursor-pointer px-3 py-2 text-sm text-white hover:bg-gray-700">Ignored</div>
            </div>
          </div>

          <!-- Direction Toggle -->
          <div data-controller="sort-direction">
            <%= f.hidden_field(:direction, value: @direction, data: { sort_direction_target: "field" }) %>
            <button type="button"
                    data-action="click->sort-direction#toggle"
                    data-sort-direction-target="icon"
                    class="flex items-center justify-center w-10 h-10 rounded-lg bg-gray-900 border border-gray-700 text-gray-400 hover:text-white hover:border-gray-600 transition-colors"
                    title="Toggle sort direction">
              <% if @direction == "asc" %>
                <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 10.5L12 3m0 0l7.5 7.5M12 3v18" />
                </svg>
              <% else %>
                <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 13.5L12 21m0 0l-7.5-7.5M12 21V3" />
                </svg>
              <% end %>
            </button>
          </div>
        </div>

        <!-- Toggles -->
        <div class="flex items-center gap-4">
          <div data-controller="toggle" class="flex items-center gap-2">
            <%= f.check_box(:remux_only, { checked: @remux_only, data: { action: "change->auto-submit#submit", toggle_target: "checkbox" }, class: "sr-only" }, "true", "false") %>
            <button type="button" data-action="click->toggle#toggle" data-toggle-target="switch" class="<%= @remux_only ? "bg-red-600" : "bg-gray-700" %> relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-red-600 focus:ring-offset-2 focus:ring-offset-gray-900">
              <span class="sr-only">REMUX</span>
              <span class="<%= @remux_only ? "translate-x-5" : "translate-x-0" %> pointer-events-none relative inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"></span>
            </button>
            <span class="text-xs font-medium text-gray-400 uppercase whitespace-nowrap">REMUX</span>
          </div>

          <div data-controller="toggle" class="flex items-center gap-2">
            <%= f.check_box(:show_ignored, { checked: @show_ignored, data: { action: "change->auto-submit#submit", toggle_target: "checkbox" }, class: "sr-only" }, "true", "false") %>
            <button type="button" data-action="click->toggle#toggle" data-toggle-target="switch" class="<%= @show_ignored ? "bg-indigo-600" : "bg-gray-700" %> relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-600 focus:ring-offset-2 focus:ring-offset-gray-900">
              <span class="sr-only">Ignored</span>
              <span class="<%= @show_ignored ? "translate-x-5" : "translate-x-0" %> pointer-events-none relative inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"></span>
            </button>
            <span class="text-xs font-medium text-gray-400 uppercase whitespace-nowrap">Ignored</span>
          </div>
        </div>
      </div>
    <% end %>
  </div>

  <!-- Shows List -->
  <%= turbo_frame_tag "shows_list" do %>
    <% if @shows.any? %>
      <div class="space-y-2">
        <% @shows.each do |show| %>
          <div id="<%= dom_id(show) %>" class="group relative overflow-hidden rounded-lg bg-gradient-to-r from-purple-500/5 to-transparent border border-gray-700 hover:border-indigo-500 transition-all duration-150 shadow hover:shadow-indigo-500/20">
            <div class="flex items-center p-4 gap-4">
              <!-- Icon -->
              <div class="flex-shrink-0">
                <div class="flex items-center justify-center w-10 h-10 rounded-lg bg-indigo-600/20 border border-indigo-500/30">
                  <svg class="h-5 w-5 text-indigo-400" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 20.25h12m-7.5-3v3m3-3v3m-10.125-3h17.25c.621 0 1.125-.504 1.125-1.125V4.875c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125z" />
                  </svg>
                </div>
              </div>

              <!-- Title and metadata -->
              <%= link_to show, data: { turbo_frame: "_top" }, class: "flex-1 min-w-0" do %>
                <div class="flex items-baseline gap-3">
                  <h3 class="text-base font-semibold text-white group-hover:text-indigo-300 transition-colors truncate"><%= show.title %></h3>
                  <span class="text-sm text-gray-500 flex-shrink-0"><%= show.year %></span>
                  <span class="text-gray-700 flex-shrink-0">â€¢</span>
                  <div class="flex items-center gap-1.5 flex-shrink-0">
                    <svg class="h-3.5 w-3.5 text-purple-400" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375" />
                    </svg>
                    <span class="text-sm font-medium text-purple-300"><%= format_bytes(show.total_size_bytes) %></span>
                  </div>
                  <% if show.contains_remux %>
                    <span class="inline-flex items-center rounded-md bg-red-500/20 px-2 py-0.5 text-xs font-bold text-red-300 ring-1 ring-inset ring-red-500/30 flex-shrink-0">
                      REMUX
                    </span>
                  <% end %>
                  <% if show.ignored %>
                    <span class="inline-flex items-center rounded-md bg-gray-500/20 px-2 py-0.5 text-xs font-bold text-gray-400 ring-1 ring-inset ring-gray-500/30 flex-shrink-0">
                      IGNORED
                    </span>
                  <% end %>
                </div>
              <% end %>

              <!-- Actions -->
              <div class="flex items-center gap-2 flex-shrink-0">
                <%= button_to refresh_show_path(show), method: :post, data: { turbo_stream: true }, class: "inline-flex items-center gap-1.5 rounded-md bg-indigo-600/20 px-3 py-2 text-sm font-medium text-indigo-300 hover:bg-indigo-600/30 border border-indigo-500/30 hover:border-indigo-500/50 transition-all cursor-pointer" do %>
                  <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99" />
                  </svg>
                  Refresh
                <% end %>
                <% if show.ignored %>
                  <%= button_to unignore_show_path(show), method: :post, data: { turbo_stream: true }, class: "inline-flex items-center gap-1.5 rounded-md bg-green-600/20 px-3 py-2 text-sm font-medium text-green-300 hover:bg-green-600/30 border border-green-500/30 hover:border-green-500/50 transition-all cursor-pointer" do %>
                    <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    Unignore
                  <% end %>
                <% else %>
                  <button type="button"
                          data-action="click->modal#show"
                          data-confirm-message="Hide this show from the list?"
                          data-confirm-url="<%= ignore_show_path(show) %>"
                          data-confirm-method="post"
                          class="inline-flex items-center gap-1.5 rounded-md bg-gray-700/50 px-3 py-2 text-sm font-medium text-gray-300 hover:bg-gray-700 border border-gray-600/50 hover:border-gray-600 transition-all cursor-pointer">
                    <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.242 4.242L9.88 9.88" />
                    </svg>
                    Ignore
                  </button>
                <% end %>
                <svg class="h-5 w-5 text-gray-500 group-hover:text-indigo-400 transition-colors" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" />
                </svg>
              </div>
            </div>
          </div>
        <% end %>
      </div>

      <!-- Pagination -->
      <% if @pagy.pages > 1 %>
        <div class="mt-6">
          <%== pagy_tailwind_nav(@pagy, link_extra: 'data-turbo-frame="shows_list"') %>
        </div>
      <% end %>
    <% else %>
      <div class="bg-gray-800/50 backdrop-blur rounded-xl border border-gray-700 p-12">
        <%= render "shared/empty_state",
              icon_type: "show",
              title: "No shows found",
              message: "No shows match your current filters. Try adjusting your search or configure Sonarr in Settings and sync to get started.",
              action_text: "Go to Settings",
              action_path: edit_settings_path %>
      </div>
    <% end %>
  <% end %>
</div>
